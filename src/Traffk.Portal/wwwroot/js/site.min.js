function debugAlert(){}function errorAlert(n){alert("errorAlert: "+n)}function getCookie(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1);if(t.indexOf(r)==0)return t.substring(r.length,t.length)}return""}function setCookie(n,t,i){var r=new Date,u;r.setTime(r.getTime()+i*864e5);u="expires="+r.toUTCString();document.cookie=n+"="+t+"; "+u}function setRootCookie(n,t,i){var r=new Date,u;r.setTime(r.getTime()+i*864e5);u="expires="+r.toUTCString();document.cookie=n+"="+t+"; "+u+";Path=/"}function requiresNonNull(n,t){if(n==null){errorAlert("requiresNonNull: ["+t+"] was null!");throw t+" must not be null";}}function requiresText(n,t){if(n==null||(""+n).length==0){errorAlert("requiresText: ["+t+"] had no text!");throw t+" must not be have a value";}}function loadPowerBiReport(n,t){$("#"+n).parent().children().hide();loadPowerBiResource(n,t,"loadReport");$("#"+n).parent().children().show()}function loadPowerBiTile(n,t){$("#"+n).parent().children().hide();loadPowerBiResource(n,t,"loadTile");$("#"+n).show()}function loadPowerBiResource(n,t,i){var u=getCookie("powerBiBearer"),r,f;debugAlert("loadPowerBiResource iframeId=["+n+"] embedAction=["+i+"] embedUrl=["+t+"] powerBiBearer=["+u+"]");requiresText(u,"powerBiBearer");requiresText(n,"iframeId");requiresText(t,"embedUrl");requiresText(i,"embedAction");r=document.getElementById(n);f=$(r.parentElement);r.width=f.innerWidth();r.height=f.innerHeight();debugAlert(r+" w:"+r.width+"h:"+r.height);r.onload=function(){var n={action:i,accessToken:u,height:r.height,width:r.width};message=JSON.stringify(n);debugAlert("loadPowerBiResource.onload: "+message);r.contentWindow.postMessage(message,"*")};r.src=t}function loadPowerBiResourceUsingLibrary(n,t,i){var f=getCookie("powerBiBearer"),r,u;switch(i){case"PowerBiReport":i="report";break;case"PowerBiTile":i="tile";break;default:i="report"}return r={type:i,id:t,accessToken:f,embedUrl:"https://app.powerbi.com/reportEmbed"},u=$("#"+n),powerbi.embed(u.get(0),r)}function trackUserInteraction(n){n.on("dataSelected",function(n){var t,o,s,h,c,u,i,f,r,e,l;if(console.log(n),t="You clicked on: <br />",n.type==="dataSelected")for(o=n.detail.report,s="Report: "+o.displayName+"<br/>",t+=s,h=n.detail.visual,c="Visual: "+h.title+"<br/>",t+=c,u=n.detail.dataPoints,i=0;i<u.length;i++)for(f=u[i].identity,r=0;r<f.length;r++)e=f[r],l=e.target.column+": "+e.equals+"<br/>",t+=l;document.getElementById("userInteractionDiv").innerHTML=t})}function getTimeTillAutoLogoff(){var t=new Date(store.get("lastSeenAtWhileLoggedIn")),n=new Date-t;return n=Math.floor(n/1e3),autoLogoutLogoffSeconds-n-10}function setLastSeenAtWhileLoggedIn(){store.set("lastSeenAtWhileLoggedIn",new Date);debugAlert("lastSeenAtWhileLoggedIn: "+store.get("lastSeenAtWhileLoggedIn")+"; getTimeTillAutoLogoff:"+getTimeTillAutoLogoff())}function idleReactivate(){window.clearInterval(timeLeftInterval);timeLeftInterval=getTimeTillAutoLogoff();$("#inactivityWarningModal").popup("hide");$.ajax({url:"/Account/KeepAlive",contentType:"application/json; charset=utf-8",async:!0,processData:!1,cache:!1,success:function(){setLastSeenAtWhileLoggedIn();debugAlert("alive")},error:function(){errorAlert("idleReactivate failed");timeLeftInterval=null}})}function removeCreativeAttachment(n,t,i){var r="Creatives/"+t+"/DeleteAttachment?assetKey="+i;$.ajax({url:r,dataType:"json",type:"DELETE",contentType:"application/json; charset=utf-8",data:JSON.stringify({assetKey:i}),async:!0,processData:!1,cache:!1,success:function(){$("#attachmentDeletedAlert").show();$(n).parent().remove()},error:function(n){alert("error:\n"+JSON.stringify(n))}})}function callAjaxFunction(n,t,i,r,u){$.ajax({url:n,dataType:"json",type:i,contentType:"application/json; charset=utf-8",data:JSON.stringify(t),async:!0,processData:!1,cache:!1,success:function(){r!=null?r():alert("success")},error:function(n){u!=null?u():alert("error:\n"+JSON.stringify(n))}})}function callAjaxDelete(n,t,i,r){return callAjaxFunction(n,t,"DELETE",i,r)}function deleteByIds(n,t,i){return t==null&&(t=getSelectionContextIds()),alert('deleteByIds("'+n+'", '+t+")"),callAjaxDelete(n,t,function(){i==null?(deleteRowsWithContextIds(t),updateSelectionMessaging()):i(t)}),event.preventDefault(),event.stopImmediatePropagation(),!1}function deleteRole(n,t){deleteRoles([n],t)}function deleteRoles(n,t){return deleteByIds("/roles/delete",n,t)}function deleteUser(n,t){deleteRoles([n],t)}function deleteUsers(n,t){return deleteByIds("/users/delete",n,t)}function deleteContact(n,t){deleteContacts([n],t)}function deleteContacts(n,t){return deleteByIds("/crm/contacts/delete",n,t)}function deleteCreative(n,t){deleteCreatives([n],t)}function deleteCreatives(n,t){return deleteByIds("/communications/creatives/delete",n,t)}function deleteCommunication(n,t){deleteCommunications([n],t)}function deleteCommunications(n,t){return deleteByIds("/communications/communications/delete",n,t)}var autoLogoutLogoffSeconds=Math.floor(parseInt(getCookie("sessionTimeoutInSeconds"))),timeLeftInterval=null,loggedInAtLoad=getCookie("loggedIn"),autoLogoutWarningSeconds,longTimeLeftInterval;loggedInAtLoad=="true"&&(autoLogoutWarningSeconds=120,setLastSeenAtWhileLoggedIn(),debugAlert("getTimeTillAutoLogoff: "+getTimeTillAutoLogoff()),longTimeLeftInterval=window.setInterval(function(){var n=getTimeTillAutoLogoff();$("#idleTicker").text("autoLogoutLogoffSeconds: "+autoLogoutLogoffSeconds+"; autoLogoutWarningSeconds: "+autoLogoutWarningSeconds+"; timeLeft: "+n+"; "+loggedInAtLoad);n<autoLogoutWarningSeconds||n<0?timeLeftInterval==null&&($("#secondsTillLogout").text(n),timeLeftInterval=window.setInterval(function(){var n=getTimeTillAutoLogoff();$("#secondsTillLogout").text(n);n<0&&(window.clearInterval(longTimeLeftInterval),window.clearInterval(timeLeftInterval),$("#idleTicker").text("REDIRECT!!!!"),location="/Account/InactivityLogOff")},500),$("#inactivityWarningModal").popup("show")):timeLeftInterval!=null&&($("#inactivityWarningModal").popup("hide"),window.clearInterval(timeLeftInterval),timeLeftInterval=null)},5e3));$(document).ready(function(){$(".color-picker").after('<button class="clearPreviousInputButton">Clear<\/button>');$(".clearPreviousInputButton").click(function(n){$(this).prev().val("");n.preventDefault()});$(".confirm-on-click").each(function(){var n=this.onclick;this.onclick=null;$(this).click(function(n){var t=$(this),u=t.attr("confirmHeading"),i,r;return u==null&&(u="Are you sure?"),i=t.attr("confirmMessage"),r=t.attr("confirmMessageFunction"),r!=null&&(i=eval(r)),confirm(i)?void 0:(n.preventDefault(),n.stopImmediatePropagation(),!1)});n!=null&&$(this).click(n)})});