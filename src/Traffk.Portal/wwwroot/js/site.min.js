function debugAlert(){}function errorAlert(n){alert("errorAlert: "+n)}function getCookie(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1);if(t.indexOf(r)==0)return t.substring(r.length,t.length)}return""}function setCookie(n,t,i){var r=new Date,u;r.setTime(r.getTime()+i*864e5);u="expires="+r.toUTCString();document.cookie=n+"="+t+"; "+u}function setRootCookie(n,t,i){var r=new Date,u;r.setTime(r.getTime()+i*864e5);u="expires="+r.toUTCString();document.cookie=n+"="+t+"; "+u+";Path=/"}function requiresNonNull(n,t){if(n==null){errorAlert("requiresNonNull: ["+t+"] was null!");throw t+" must not be null";}}function requiresText(n,t){if(n==null||(""+n).length==0){errorAlert("requiresText: ["+t+"] had no text!");throw t+" must not be have a value";}}function loadPowerBiReport(n,t){$("#"+n).parent().children().hide();loadPowerBiResource(n,t,"loadReport");$("#"+n).parent().children().show()}function loadPowerBiTile(n,t){$("#"+n).parent().children().hide();loadPowerBiResource(n,t,"loadTile");$("#"+n).show()}function loadPowerBiResource(n,t,i){var u=getCookie("powerBiBearer"),r,f;debugAlert("loadPowerBiResource iframeId=["+n+"] embedAction=["+i+"] embedUrl=["+t+"] powerBiBearer=["+u+"]");requiresText(u,"powerBiBearer");requiresText(n,"iframeId");requiresText(t,"embedUrl");requiresText(i,"embedAction");r=document.getElementById(n);f=$(r.parentElement);r.width=f.innerWidth();r.height=f.innerHeight();debugAlert(r+" w:"+r.width+"h:"+r.height);r.onload=function(){var n={action:i,accessToken:u,height:r.height,width:r.width};message=JSON.stringify(n);debugAlert("loadPowerBiResource.onload: "+message);r.contentWindow.postMessage(message,"*")};r.src=t}function loadPowerBiResourceUsingLibrary(n,t,i){var f=getCookie("powerBiBearer"),r,u;switch(i){case"PowerBiReport":i="report";break;case"PowerBiTile":i="tile";break;default:i="report"}return r={type:i,id:t,accessToken:f,embedUrl:"https://app.powerbi.com/reportEmbed"},u=$("#"+n),powerbi.embed(u.get(0),r)}function trackUserInteraction(n){n.on("dataSelected",function(n){var t,o,s,h,c,u,i,f,r,e,l;if(console.log(n),t="You clicked on: <br />",n.type==="dataSelected")for(o=n.detail.report,s="Report: "+o.displayName+"<br/>",t+=s,h=n.detail.visual,c="Visual: "+h.title+"<br/>",t+=c,u=n.detail.dataPoints,i=0;i<u.length;i++)for(f=u[i].identity,r=0;r<f.length;r++)e=f[r],l=e.target.column+": "+e.equals+"<br/>",t+=l;document.getElementById("userInteractionDiv").innerHTML=t})}function getTimeTillAutoLogoff(){var t=new Date(store.get("lastSeenAtWhileLoggedIn")),n=new Date-t;return n=Math.floor(n/1e3),autoLogoutLogoffSeconds-n}function setLastSeenAtWhileLoggedIn(){store.set("lastSeenAtWhileLoggedIn",new Date);debugAlert("lastSeenAtWhileLoggedIn: "+store.get("lastSeenAtWhileLoggedIn")+"; getTimeTillAutoLogoff:"+getTimeTillAutoLogoff())}function idleReactivate(){window.clearInterval(timeLeftInterval);timeLeftInterval=getTimeTillAutoLogoff();$("#inactivityWarningModal").popup("hide");$.ajax({url:"/Account/KeepAlive",contentType:"application/json; charset=utf-8",async:!0,processData:!1,cache:!1,success:function(){setLastSeenAtWhileLoggedIn();debugAlert("alive")},error:function(){errorAlert("idleReactivate failed");timeLeftInterval=null}})}function popupConfirmHide(){$("#popup-confirm").popup("hide")}function onSend(n){$("#universal-alert-item-text").text(n);$("#universal-alert").fadeIn(500)}function onSentSuccess(n){$("#universal-alert-item-text").text(n);toastAppearDisappear($("#universal-alert"))}function setUI(){jQuery("#primary-subnav .dropdown-menu").width(window.innerWidth+20);jQuery("#primary-subnav .dropdown-menu .dropdown-submenu").width("auto")}function toastAppearDisappear(n){n.is(":visible")?n.delay(4e3).hide(500):n.fadeIn(500).delay(4e3).hide(500)}function showToast(n){var t=$("#universal-alert"),i=$("#universal-alert-item-text");i.text(n);toastAppearDisappear(t)}function pinMenu(n){jQuery(n).removeClass("fa-thumb-tack");jQuery(n).addClass("fa-chevron-up");jQuery(".lvl2-nav").css("cssText",jQuery(".lvl2-nav").attr("style")+"display: block !important;");jQuery("#page-wrapper").removeClass("no-padding-top");jQuery("#page-wrapper").addClass("nav-padding-top");setCookie("traffkPinnedMenu",!0,14)}function unpinMenu(n){jQuery(n).removeClass("fa-chevron-up");jQuery(n).addClass("fa-thumb-tack");jQuery(".lvl2-nav").css("cssText","width: "+(window.innerWidth+20)+"px;");jQuery("#page-wrapper").removeClass("nav-open");jQuery("#page-wrapper").removeClass("nav-padding-top");jQuery("#page-wrapper").removeClass("no-padding-top");setCookie("traffkPinnedMenu",!1,14)}function resendInvitation(n,t,i){var r="Sending invitation.",u;onSend(r);$(".floated-filter").hide();u="Users/"+n+"/ResendInvitation";$.ajax({url:u,method:"POST",dataType:"json",contentType:"application/json; charset=utf-8",async:!0,processData:!1,cache:!1,success:function(){t!=null?t():debugAlert("success");r="Invitation resent.";onSentSuccess(r)},error:function(n){i!=null?i():alert("error:\n"+JSON.stringify(n))}})}function removeCreativeAttachment(n,t,i){var r="Creatives/"+t+"/DeleteAttachment?assetKey="+i;$.ajax({url:r,dataType:"json",type:"DELETE",contentType:"application/json; charset=utf-8",data:JSON.stringify({assetKey:i}),async:!0,processData:!1,cache:!1,success:function(){$("#attachmentDeletedAlert").show();$(n).parent().remove()},error:function(n){alert("error:\n"+JSON.stringify(n))}})}function callAjaxFunction(n,t,i,r,u){$.ajax({url:n,dataType:"json",type:i,contentType:"application/json; charset=utf-8",data:JSON.stringify(t),async:!0,processData:!1,cache:!1,success:function(){r!=null?r():debugAlert("success")},error:function(n){u!=null?u():alert("error:\n"+JSON.stringify(n))}})}function callAjaxDelete(n,t,i,r){return callAjaxFunction(n,t,"DELETE",i,r)}function deleteByIds(n,t,i){return t==null&&(t=getSelectionContextIds()),debugAlert('deleteByIds("'+n+'", '+JSON.stringify(t)+")"),callAjaxDelete(n,t,function(){if(i==null){deleteRowsWithContextIds(t);updateSelectionMessaging();showToast("Items deleted successfully.")}else i(t)}),event.preventDefault(),event.stopImmediatePropagation(),!1}function deleteRole(n,t){deleteRoles([n],t)}function deleteRoles(n,t){return deleteByIds("/roles/delete",n,t)}function deleteRoleWithRedirect(n,t){return deleteByIds("/roles/delete?showToast=true",[n],t)}function deleteUser(n,t){deleteUsers([n],t)}function deleteUsers(n,t){return deleteByIds("/users/delete",n,t)}function deleteUserWithRedirect(n,t){return deleteByIds("/users/delete?showToast=true",[n],t)}function deleteContact(n,t){deleteContacts([n],t)}function deleteContacts(n,t){return deleteByIds("/crm/contacts/delete",n,t)}function deleteCreative(n,t){deleteCreatives([n],t)}function deleteCreatives(n,t){return deleteByIds("/communications/creatives/delete",n,t)}function deleteCommunication(n,t){deleteCommunications([n],t)}function deleteCommunications(n,t){return deleteByIds("/communications/communications/delete",n,t)}function cancelJob(n,t){cancelJobs([n],t)}function cancelJobs(n,t){return showToast("Cancelling jobs..."),t||(t=function(n){n.forEach(function(n){var t="tr[jobId='"+n+"'] td.job-status";$(t).html("Cancelling...")})}),deleteByIds("/jobs/cancel",n,t)}var autoLogoutLogoffSeconds=Math.floor(parseInt(getCookie("sessionTimeoutInSeconds"))),timeLeftInterval=null,loggedInAtLoad=getCookie("loggedIn"),autoLogoutWarningSeconds,longTimeLeftInterval;loggedInAtLoad=="true"&&(autoLogoutWarningSeconds=120,setLastSeenAtWhileLoggedIn(),debugAlert("getTimeTillAutoLogoff: "+getTimeTillAutoLogoff()),longTimeLeftInterval=window.setInterval(function(){var n=getTimeTillAutoLogoff();$("#idleTicker").text("autoLogoutLogoffSeconds: "+autoLogoutLogoffSeconds+"; autoLogoutWarningSeconds: "+autoLogoutWarningSeconds+"; timeLeft: "+n+"; "+loggedInAtLoad);n<autoLogoutWarningSeconds||n<0?timeLeftInterval==null&&($("#secondsTillLogout").text(n),timeLeftInterval=window.setInterval(function(){var n=getTimeTillAutoLogoff();$("#secondsTillLogout").text(n);n<0&&(window.clearInterval(longTimeLeftInterval),window.clearInterval(timeLeftInterval),$("#idleTicker").text("REDIRECT!!!!"),location="/Account/InactivityLogOff")},500),$("#inactivityWarningModal").popup("show")):timeLeftInterval!=null&&($("#inactivityWarningModal").popup("hide"),window.clearInterval(timeLeftInterval),timeLeftInterval=null)},5e3));$(document).ready(function(){var n,i,t;if(jQuery(".popup").popup({focusdelay:400,outline:!0}),setUI(),n=getCookie("traffkPinnedMenu"),n&&n==="true"&&$(window).width()>768&&pinMenu(jQuery("#pin-menu")),jQuery("#client-logo").parent().addClass("img-logo"),jQuery("#reports-container .row").each(function(){var n=0;jQuery(this).children(".col-sm-4").children(".mini-panel").children(".mini-panel-bottom").each(function(){jQuery(this).height()>n&&(n=jQuery(this).height())});jQuery(this).children(".col-sm-4").children(".mini-panel").children(".mini-panel-bottom").height(n+"px")}),$(".color-picker").after('<button class="clearPreviousInputButton">Clear<\/button>'),$(".clearPreviousInputButton").click(function(n){$(this).prev().val("");n.preventDefault()}),$(".confirm-on-click").each(function(){var n=this.onclick;this.onclick=null;$(this).click(function(t){var i,r,u,f,e;t.preventDefault();t.stopImmediatePropagation();i=$(this);this.text?$("#popup-confirm-action-button").text(this.text):$("#popup-confirm-action-button").text("Continue");r=i.attr("confirmHeading");r!=null&&$("#popup-confirm-heading").text(r);$("#popup-confirm-message").text("Are you sure?");u=i.attr("confirmMessage");u!=null&&$("#popup-confirm-message").text(u);f=i.attr("confirmMessageFunction");f!=null&&(e=eval(f),$("#popup-confirm-action-button").text(e.buttonAction),$("#popup-confirm-message").text(e.message));$("#popup-confirm-action-button").bind("click",n);$("#popup-confirm").popup("show")})}),jQuery(".filter-tags li a").click(function(){jQuery(this).parent().remove()}),jQuery(document).mouseup(function(n){var t=jQuery(".floated-filter");t.is(n.target)||t.has(n.target).length!==0||t.hide()}),jQuery(".section-toggle").click(function(){var n=jQuery(this).attr("data-toggle");jQuery("."+n).is(":visible")?(jQuery("."+n).fadeOut(0),jQuery(this).children(".fa").removeClass("fa-minus"),jQuery(this).children(".fa").addClass("fa-plus")):(jQuery("."+n).fadeIn(0),jQuery(this).children(".fa").addClass("fa-minus"),jQuery(this).children(".fa").removeClass("fa-plus"))}),jQuery(".navbar-toggle").click(function(){window.innerWidth<768&&(jQuery(".navbar-right").is(":visible")?jQuery(".navbar-right").slideUp(300):jQuery(".navbar-right").slideDown(300))}),jQuery("a.dropdown-toggle.navbar-brand.img-logo").click(function(){var n=!jQuery(".account-nav")[0];$(window).width()>768&&(jQuery("#page-wrapper").hasClass("nav-open")?jQuery("#page-wrapper").removeClass("nav-open"):n&&jQuery("#page-wrapper").addClass("nav-open"))}),jQuery(document).mouseup(function(n){var t=jQuery("ul.nav.navbar-left.top-nav");t.is(n.target)||jQuery("#page-wrapper").removeClass("nav-open")}),jQuery(".toggle").click(function(){var n=jQuery(this).attr("data-toggle");jQuery("#"+n).is(":visible")?jQuery("#"+n).fadeOut(300):jQuery("#"+n).fadeIn(300);jQuery(this).children(".fa-chevron-down").length>0?(jQuery(this).children(".fa").removeClass("fa-chevron-down"),jQuery(this).children(".fa").addClass("fa-chevron-up")):(jQuery(this).children(".fa").removeClass("fa-chevron-up"),jQuery(this).children(".fa").addClass("fa-chevron-down"))}),jQuery("#back-to-top").length){i=100;t=function(){var n=jQuery(window).scrollTop();n>i?jQuery("#back-to-top").addClass("show"):jQuery("#back-to-top").removeClass("show")};t();jQuery(window).on("scroll",function(){t()});jQuery("#back-to-top").on("click",function(n){n.preventDefault();jQuery("html,body").animate({scrollTop:0},700)})}jQuery("#pin-menu").click(function(){jQuery(this).hasClass("fa-chevron-up")?unpinMenu(this):pinMenu(this)});jQuery("#mobile-menu li").click(function(){jQuery(this).children("ul").toggle();jQuery(this).children("a").children(".fa").hasClass("fa-caret-right")?(jQuery(this).children("a").children(".fa").removeClass("fa-caret-right"),jQuery(this).children("a").children(".fa").addClass("fa-caret-down")):(jQuery(this).children("a").children(".fa").removeClass("fa-caret-down"),jQuery(this).children("a").children(".fa").addClass("fa-caret-right"))});jQuery("a.dropdown-toggle").click(function(){$(window).width()<768&&(jQuery("#mobile-menu").toggle(),jQuery("#mobile-menu, #mobile-menu li ul").width($(window).width()))})});